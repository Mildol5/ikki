<app>

  <header>
    <h1>ikki</h1>
    <p>ikki is not flux</p>
  </header>

  <section class="billboard">
    <h2>deadly simple &amp; html-centric</h2>
    <img src="demo/one-way.png">
    <img src="demo/routing.png">
  </section>

  <h2>promising generators</h2>

  <h3>1. object</h3>

  <p>At the first, see the traditional way to give the value.</p>

  <highlight>
    &lt;my-tag message="Hi!" /&gt;<br>
  </highlight>

  <p>Then, see the ikki's way. You can give the data as an object.<br>Great, but boring? OK, go ahead.</p>

  <highlight>
    &lt;my-tag opts=&#123; object &#125; /&gt;<br>
    &lt;script&gt;<br>
    &nbsp;&nbsp;this.object = { message: 'Hi!' }<br>
    &lt;/script&gt;
  </highlight>

  <my-tag opts={ obj } />

  <h3>2. promise</h3>

  <p>We can give a promise to the tag. It'll make really easy to do any async process.</p>

  <highlight>
    &lt;my-tag opts=&#123; promise &#125; /&gt;<br>
    &lt;script&gt;<br>
    &nbsp;&nbsp;this.promise = new Promise(function(resolve, reject) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;setTimeout(function() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({ message: 'Hello!' })<br>
    &nbsp;&nbsp;&nbsp;&nbsp;}, 10000)<br>
    &nbsp;&nbsp;})<br>
    &lt;/script&gt;
  </highlight>

  <my-tag opts={ prom } />

  <h3>3. generator</h3>

  <p>The third stuff is the generator. Think it as serial promises.<br>That's awesome!</p>

  <highlight>
    &lt;my-tag opts=&#123; generator &#125; /&gt;<br>
    &lt;script&gt;<br>
    &nbsp;&nbsp;this.generator = function*() { while (true) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;yield new Promise(function(resolve, reject) {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(function() {<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolve({ message: hello())<br>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}, 1000)<br>
    &nbsp;&nbsp;&nbsp;&nbsp;})<br>
    &nbsp;&nbsp;}}<br>
    &lt;/script&gt;
  </highlight>

  <my-tag opts={ gen } />

  <h2>routings in html</h2>

  <p>The routing is needed to be more frexible.<br>
    Nowaday, routing with the entire page is impractical.<br>
    You may wanna change just the part of HTML instead of the entire page.<br>
    Here is what we wanted to do.</p>

  <highlight>
    &lt;router&gt;<br>
    &nbsp;&nbsp;&lt;route path="/"&gt;&lt;my-tag message="hello world" /&gt;&lt;/route&gt;<br>
    &nbsp;&nbsp;&lt;route path="lorem"&gt;&lt;my-tag message="Lorem Ipsum is..." /&gt;&lt;/route&gt;<br>
    &nbsp;&nbsp;&lt;route path="member/:person"&gt;&lt;my-tag message="$person" /&gt;&lt;/route&gt;<br>
    &nbsp;&nbsp;&lt;route path="merol" redirect="lorem" /&gt;<br>
    &nbsp;&nbsp;&lt;route path="*"&gt;&lt;my-tag message="not found." /&gt;&lt;/route&gt;<br>
    &lt;/router&gt;<br>
  </highlight>

  <navi>
    <ul>
      <li><a href="#">#</a></li>
      <li><a href="#lorem">#lorem</a></li>
      <li><a href="#member/Tom">#member/Tom</a></li>
      <li><a href="#member/Yayoi">#member/Yayoi</a></li>
      <li><a href="#merol">#merol</a></li>
      <li><a href="#not/found">#not/found</a></li>
    </ul>
  </navi>

  <router>
    <route path="/"><my-tag message="hello world" desc="slash(/) matchs url without hash" /></route>
    <route path="lorem"><my-tag message="Lorem Ipsum is simply dummy text of the printing and typesetting industry." desc="'lorem' matchs exact 'lorem'" /></route>
    <route path="member/:person"><my-tag message="$person" desc="'member/:person' matchs anything starting with 'member/'" /></route>
    <route path="merol" redirect="lorem" />
    <route path="*"><my-tag message="not found." desc="asterisk(*) matchs any url" /></route>
  </router>

  <h2>controllers, kind of</h2>

  <p>coming soon.</p>

  <footer>
    <p><a href="https://github.com/cognitom/ikki">GitHub</a></p>
  </footer>

  <script>
    // just object
    this.obj = { message: 'Hi!', desc: 'This is just an object.' }

    // promise
    this.prom = new Promise(function(resolve, reject) {
      setTimeout(function() {
        resolve({ message: 'Hello!', desc: 'You can give a promise.' })
      }, 10000)
    })

    // generator
    var n = 0
    this.gen = function*() { while (true) {
      yield new Promise(function(resolve, reject) {
        setTimeout(function() {
          resolve({ message: pick(HELLO_I18N), desc: 'Generator is awesome!' })
        }, 1000)
      })
    }}

    var HELLO_I18N = ['Hello', 'こんにちは', '你好', 'Salut', 'Hallo']
    var pick = function() { var n = -1; return function(arr){
      return arr[n = (n + Math.ceil(Math.random() * (arr.length - 1))) % arr.length]
    }}()
  </script>

  <style scoped>
    :scope {
      display: block;
      text-align: center;
    }
    :scope > header {
      padding: 8em 0;
      background: #8A97A1;
      color: white;
      text-shadow: 0 0 2px rgba(0,0,0,.5);
    }
    :scope > header h1 {
      margin: 0;
      font-size: 340%;
    }
    :scope > header p {
      margin: 0;
    }
    :scope > p {
      line-height: 1.4em;
      padding: 0 .5em;
    }
    :scope > h2 {
      margin: 3em 0 .5em;
      color: #8A97A1;
    }
    :scope > h3 {
      margin: 3em 0 .5em;
    }
    :scope > footer {
      border-top: 1px solid #ccc;
      margin: 3em 0 0;
      padding: 2em 0;
      background: #f7f7f7;
    }
    :scope > navi {

    }
    :scope > navi ul {
      list-style: none;
      padding: .5em;
    }
    :scope > navi li {
      display: inline-block;
    }
    :scope > navi li:after {
      content: "-";
      margin: 0 1em;
    }
    :scope > navi li:last-child:after {
      content: none;
    }
    :scope > navi a {

    }
    a {
      color: #2887D7;
      text-decoration: none;
    }
    .billboard {
      background: #ffd700;
      color: #8A97A1;
      padding: 2em;
    }
  </style>

</app>
